name: Generate Patch

on:
  workflow_dispatch:   # Se ejecuta manualmente desde la pestaÃ±a Actions

jobs:
  make-patch:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Configure Git
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "actions@github.com"

      - name: Create patch for pm folder
        run: |
          mkdir -p patches
          git diff HEAD -- platform/frameworks/base/services/core/java/com/android/server/pm/ > patches/frameworks_base_pm.patch

      - name: Upload patch artifact
        uses: actions/upload-artifact@v4
        with:
          name: frameworks_base_pm-patch
          path: patches/frameworks_base_pm.patch
